# UXFD 合并实施时间表

## 时间规划（建议）

| PR | 任务 | 预计工期 | 开始日期 | 结束日期 | 负责人 | 依赖关系 |
|----|------|----------|----------|----------|--------|----------|
| PR0 | Submodule 落位 | 2 天 | | | | 无 |
| PR1 | TSPN 骨架实现 | 5 天 | | | | PR0 |
| PR2 | 配置映射机制 | 3 天 | | | | PR1 |
| PR3 | Explain Factory | 4 天 | | | | PR1, PR2 |
| PR4 | Collect/Report | 2 天 | | | | PR3 |
| PR5 | Agent Factory | 2 天 | | | | PR4 |
| **总计** | | **18 天** | | | | |

## 里程碑

- **M1**（第 2 天）：Submodule 基础设施就绪
- **M2**（第 7 天）：核心模型框架完成
- **M3**（第 10 天）：配置系统对接完成
- **M4**（第 14 天）：解释能力集成
- **M5**（第 16 天）：结果闭环完成
- **M6**（第 18 天）：全部功能交付

## 每日任务分解

### PR0: Submodule 落位（2 天）

**Day 1:**
- [ ] 创建 `paper/UXFD_paper/` 目录结构
- [ ] 编写 README.md 和 README_SUBMODULE.md
- [ ] 定义 7 个 paper_id 映射关系
- [ ] 提交目录结构

**Day 2:**
- [ ] 添加第一个 submodule（fusion_1d2d）
- [ ] 创建 VIBENCH.md 模板
- [ ] 验证不影响主仓库运行
- [ ] 提交 submodule

### PR1: TSPN 骨架（5 天）

**Day 3-4:**
- [ ] 实现 OperatorRegistry 基础框架
- [ ] 定义 base operator 接口
- [ ] 实现 LayoutSpec 和适配器机制
- [ ] 编写单元测试

**Day 5-6:**
- [ ] 实现 TSPN_UXFD 模型主体
- [ ] 集成 operator_graph 解析
- [ ] 实现 HookStore 机制
- [ ] 注册到 model_registry

**Day 7:**
- [ ] 实现最小算子集（SP_1D, FE, Adapter）
- [ ] 编写 smoke 测试
- [ ] 验证与前向兼容性

### PR2: 配置映射（3 天）

**Day 8-9:**
- [ ] 实现 config_adapter
- [ ] 支持上游配置格式转换
- [ ] 添加 paper_id 映射逻辑

**Day 10:**
- [ ] 创建 7 篇 paper 的预设配置
- [ ] 实现 gen_uxfd_min_configs 脚本
- [ ] 验证配置加载正确性

### PR3: Explain Factory（4 天）

**Day 11-12:**
- [ ] 实现 metadata_reader 统一接口
- [ ] 实现 ExplainReady 门控机制
- [ ] 定义 metadata schema

**Day 13-14:**
- [ ] 实现核心解释器（router_weights, timefreq）
- [ ] 添加降级策略
- [ ] 集成到 trainer extensions

### PR4: Collect/Report（2 天）

**Day 15:**
- [ ] 实现 collect_uxfd_runs.py 脚本
- [ ] 支持 manifest.json 生成
- [ ] 实现 CSV 导出功能

**Day 16:**
- [ ] 集成 manifest 生成到主流程
- [ ] 测试跨 run 汇总功能

### PR5: Agent Factory（2 天）

**Day 17-18:**
- [ ] 实现 TODO 蒸馏机制
- [ ] 定义 frontmatter schema
- [ ] 预留 LLM 接口
- [ ] 编写文档和示例

## 并行执行可能性

- **PR2 可以与 PR3 部分并行**：配置映射和解释工厂可以独立开发
- **PR4 和 PR5 可以并行**：Collect/Report 和 Agent Factory 相对独立

## 资源需求

- **核心开发者**：1-2 人
- **代码审查**：每次 PR 必须审查
- **测试环境**：需要能够运行 7 篇 paper 的环境

## 风险缓冲

建议预留 **20% 的时间缓冲**：
- PR1 技术难度高，可能需要额外 1-2 天
- PR3 需要与现有系统集成，可能有未知依赖
- 整体集成测试可能需要 1-2 天

## 验收检查清单

每个 PR 完成时必须检查：

- [ ] 代码通过所有测试
- [ ] 文档已更新
- [ ] 配置可加载
- [ ] 不破坏现有功能
- [ ] 代码审查通过
- [ ] 性能无明显下降

## 回滚计划

每个 PR 的回滚命令：
```bash
# 回滚到上一个稳定版本
git revert <commit_hash>

# 或使用 tag 回滚
git checkout v0.1-stable
git cherry-pick ^v0.1-stable HEAD
```

---

*注意：以上时间估算基于正常工作节奏，实际执行时请根据团队情况调整*